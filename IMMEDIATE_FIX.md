# ğŸš¨ ç«‹å³ä¿®å¤ Supabase è¿æ¥é—®é¢˜

## å½“å‰æƒ…å†µ

- âœ… Supabase æä¾›çš„æ ¼å¼ï¼š`postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-1-ap-south-1.pooler.supabase.com:5432/postgres`
- âŒ è¿æ¥å¤±è´¥ï¼šAuthentication failed
- âŒ å·²å°è¯•å¤šæ¬¡æ›´æ¢å¯†ç ä»ç„¶å¤±è´¥

## ğŸ”§ ç«‹å³å°è¯•çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: æµ‹è¯•æ‰€æœ‰å¯èƒ½çš„è¿æ¥æ ¼å¼ï¼ˆæ¨èï¼‰

è¿è¡Œè‡ªåŠ¨æµ‹è¯•è„šæœ¬ï¼Œå®ƒä¼šå°è¯•æ‰€æœ‰å¯èƒ½çš„è¿æ¥æ ¼å¼ï¼š

```bash
npm run test:supabase-formats
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- æµ‹è¯• 5 ç§ä¸åŒçš„è¿æ¥å­—ç¬¦ä¸²æ ¼å¼
- è‡ªåŠ¨æ‰¾åˆ°å¯ç”¨çš„æ ¼å¼
- æä¾›æ­£ç¡®çš„ `.env` é…ç½®

### æ–¹æ¡ˆ 2: æ‰‹åŠ¨å°è¯•æ ‡å‡† postgres æ ¼å¼

å¦‚æœ Supabase æä¾›çš„æ ¼å¼ä¸å·¥ä½œï¼Œå°è¯•ä½¿ç”¨æ ‡å‡†çš„ `postgres` ç”¨æˆ·åï¼ˆä¸å¸¦é¡¹ç›®å¼•ç”¨ï¼‰ï¼š

```env
# å°è¯•æ ‡å‡†æ ¼å¼
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@aws-1-ap-south-1.pooler.supabase.com:5432/postgres"
DIRECT_URL="postgresql://postgres:[YOUR-PASSWORD]@aws-1-ap-south-1.pooler.supabase.com:5432/postgres"
```

ç„¶åæµ‹è¯•ï¼š
```bash
npm run test:supabase
```

### æ–¹æ¡ˆ 3: åœ¨ Supabase Dashboard ä¸­éªŒè¯å¯†ç 

1. **æ‰“å¼€ Supabase SQL Editor**
   - Dashboard â†’ SQL Editor

2. **è¿è¡ŒæŸ¥è¯¢**ï¼š
   ```sql
   SELECT current_user, current_database();
   ```

3. **å¦‚æœæŸ¥è¯¢æˆåŠŸ**ï¼š
   - è¯´æ˜æ•°æ®åº“å’Œå¯†ç éƒ½æ­£å¸¸
   - é—®é¢˜åœ¨è¿æ¥å­—ç¬¦ä¸²æ ¼å¼
   - ç»§ç»­å°è¯•ä¸åŒçš„æ ¼å¼

4. **å¦‚æœæŸ¥è¯¢å¤±è´¥**ï¼š
   - è¯´æ˜å¯†ç ç¡®å®æœ‰é—®é¢˜
   - é‡ç½®æ•°æ®åº“å¯†ç 
   - æ›´æ–° `.env` æ–‡ä»¶

### æ–¹æ¡ˆ 4: æ£€æŸ¥ Supabase è¿æ¥é€‰é¡¹

åœ¨ Supabase Dashboard ä¸­ï¼š

1. **Settings â†’ Database â†’ Connection string**
2. **æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„è¿æ¥é€‰é¡¹**ï¼š
   - Session mode
   - Session pooler
   - Direct connection
   - Transaction mode
   - Transaction pooler

3. **å°è¯•æ¯ä¸ªé€‰é¡¹**ï¼š
   - å¤åˆ¶æ¯ä¸ªé€‰é¡¹çš„è¿æ¥å­—ç¬¦ä¸²
   - æ›´æ–° `.env` æ–‡ä»¶
   - è¿è¡Œ `npm run test:supabase` æµ‹è¯•

### æ–¹æ¡ˆ 5: ä½¿ç”¨ä¸åŒçš„ä¸»æœºåœ°å€

Supabase å¯èƒ½æä¾›å¤šä¸ªä¸»æœºåœ°å€ã€‚æ£€æŸ¥ Dashboard ä¸­æ˜¯å¦æœ‰ï¼š

- `aws-1-ap-south-1.pooler.supabase.com` (å½“å‰ä½¿ç”¨çš„)
- `db.[PROJECT-REF].supabase.co` (å¯èƒ½çš„æ›¿ä»£)

å°è¯•ä½¿ç”¨ä¸åŒçš„ä¸»æœºåœ°å€ã€‚

## ğŸ“‹ æ¨èçš„æµ‹è¯•é¡ºåº

1. **é¦–å…ˆè¿è¡Œè‡ªåŠ¨æµ‹è¯•**ï¼š
   ```bash
   npm run test:supabase-formats
   ```

2. **å¦‚æœè‡ªåŠ¨æµ‹è¯•æ‰¾åˆ°å¯ç”¨æ ¼å¼**ï¼š
   - ä½¿ç”¨æä¾›çš„é…ç½®æ›´æ–° `.env`
   - è¿è¡Œ `npm run test:supabase` éªŒè¯

3. **å¦‚æœè‡ªåŠ¨æµ‹è¯•éƒ½å¤±è´¥**ï¼š
   - åœ¨ Supabase SQL Editor ä¸­éªŒè¯å¯†ç 
   - å¦‚æœ SQL Editor å¯ä»¥è¿æ¥ï¼Œå°è¯•æ–¹æ¡ˆ 2ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰
   - å¦‚æœ SQL Editor ä¹Ÿå¤±è´¥ï¼Œé‡ç½®å¯†ç 

4. **å¦‚æœä»ç„¶å¤±è´¥**ï¼š
   - æ£€æŸ¥ Supabase é¡¹ç›®çŠ¶æ€
   - å°è¯•åˆ›å»ºæ–°çš„ Supabase é¡¹ç›®
   - æˆ–è€ƒè™‘ä½¿ç”¨å…¶ä»–æ•°æ®åº“æœåŠ¡

## ğŸ”‘ å…³é”®æ£€æŸ¥ç‚¹

- [ ] å¯†ç æ˜¯å¦æ­£ç¡®ï¼ˆåœ¨ SQL Editor ä¸­éªŒè¯ï¼‰
- [ ] é¡¹ç›®å¼•ç”¨æ ¼å¼æ˜¯å¦æ­£ç¡®
- [ ] ä¸»æœºåœ°å€æ˜¯å¦æ­£ç¡®
- [ ] ç«¯å£æ˜¯å¦æ­£ç¡®ï¼ˆ5432ï¼‰
- [ ] æ²¡æœ‰æ·»åŠ é¢å¤–çš„å‚æ•°ï¼ˆå¦‚ `?pgbouncer=true`ï¼‰
- [ ] Supabase é¡¹ç›®æœªæš‚åœ
- [ ] åŒºåŸŸè®¾ç½®åŒ¹é…

## ğŸ†˜ å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥

è€ƒè™‘ï¼š

1. **åˆ›å»ºæ–°çš„ Supabase é¡¹ç›®**
   - ä½¿ç”¨æ–°é¡¹ç›®çš„è¿æ¥å­—ç¬¦ä¸²
   - è¿è¡Œæ•°æ®åº“è¿ç§»

2. **ä½¿ç”¨å…¶ä»–æ•°æ®åº“æœåŠ¡**
   - Railway PostgreSQL
   - Vercel Postgres
   - æœ¬åœ° PostgreSQLï¼ˆç”¨äºå¼€å‘ï¼‰

3. **è”ç³» Supabase æ”¯æŒ**
   - æä¾›é¡¹ç›®å¼•ç”¨å’Œé”™è¯¯ä¿¡æ¯
   - è¯¢é—®æ­£ç¡®çš„è¿æ¥å­—ç¬¦ä¸²æ ¼å¼

