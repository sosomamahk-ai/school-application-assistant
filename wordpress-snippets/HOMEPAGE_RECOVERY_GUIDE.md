# WordPress 主页恢复指南 🔧

## 问题描述
主页突然丢失，通过主题自定义器其他页面也无法显示。

---

## 🔍 第一步：检查 WordPress 主页设置

### 1.1 检查阅读设置

1. **登录 WordPress 后台**
2. 进入 **设置 (Settings)** → **阅读 (Reading)**
3. 查看 **"您的主页显示" (Your homepage displays)** 部分

**检查以下内容：**

- ✅ **静态页面 (A static page)**
  - **主页 (Homepage)**: 应该选择一个页面（例如："主页" 或 "Home"）
  - **文章页 (Posts page)**: 可以选择一个页面或留空

- ❌ **您的最新文章 (Your latest posts)**
  - 如果选择了这个，主页会显示文章列表而不是自定义页面

**如果设置错误：**
- 选择 **"静态页面"**
- 在 **"主页"** 下拉菜单中选择您的主页页面
- 点击 **"保存更改"**

---

## 🔍 第二步：检查主页页面是否存在

### 2.1 查看所有页面

1. 进入 **页面 (Pages)** → **所有页面 (All Pages)**
2. 查找您的主页（可能叫 "主页"、"Home"、"首页" 等）

### 2.2 如果主页页面存在

**检查页面状态：**
- ✅ **已发布 (Published)** - 正常
- ❌ **草稿 (Draft)** - 需要发布
- ❌ **已删除 (Trash)** - 需要恢复

**如果页面是草稿：**
1. 点击页面标题进入编辑
2. 点击右上角 **"发布"** 或 **"更新"** 按钮

**如果页面在回收站：**
1. 在页面列表顶部，点击 **"回收站"** 筛选
2. 找到您的主页
3. 点击 **"恢复"**

### 2.3 如果主页页面不存在

**需要创建新主页：**

#### 方法 A：使用 Elementor 创建（推荐）

1. **创建新页面**
   - 进入 **页面** → **添加新页面**
   - 标题：输入 "主页" 或 "Home"

2. **使用 Elementor 编辑**
   - 点击 **"使用 Elementor 编辑"** 按钮
   - 或点击 **"编辑"** → 选择 **"Elementor"**

3. **添加主页短代码**
   - 在 Elementor 中，搜索并拖入 **"Shortcode"** 小部件
   - 在短代码框中输入：
     ```
     [sosomama_homepage]
     ```
   - 或者带参数：
     ```
     [sosomama_homepage ranking_posts="10" profile_posts="12"]
     ```

4. **发布页面**
   - 点击 **"发布"** 或 **"更新"**

5. **设置为主页**
   - 进入 **设置** → **阅读**
   - 在 **"主页"** 下拉菜单中选择刚创建的页面
   - 点击 **"保存更改"**

#### 方法 B：使用经典编辑器创建

1. **创建新页面**
   - 进入 **页面** → **添加新页面**
   - 标题：输入 "主页"

2. **添加短代码**
   - 在编辑器中输入：
     ```
     [sosomama_homepage]
     ```

3. **发布并设置为主页**（同上）

---

## 🔍 第三步：检查主题设置

### 3.1 检查主题自定义器

1. 进入 **外观 (Appearance)** → **自定义 (Customize)**

2. **检查主页设置**
   - 查找 **"主页设置"** 或 **"Homepage Settings"**
   - 确认主页页面已正确选择

3. **检查其他设置**
   - 查看是否有其他设置被重置
   - 如果有备份，可以尝试恢复

### 3.2 检查主题模板

某些主题可能需要特定的页面模板：

1. **编辑主页页面**
2. 在右侧边栏找到 **"页面属性"**
3. 查看 **"模板"** 下拉菜单
4. 尝试选择不同的模板（如 "默认模板"、"全宽" 等）

---

## 🔍 第四步：检查短代码是否正常工作

### 4.1 确认短代码已激活

1. 进入 **Snippets** → **所有代码片段**
2. 查找包含 `sosomama_homepage` 的代码片段
3. 确认状态为 **"已激活"**（绿色）

**如果未激活：**
- 点击 **"激活"** 按钮

**如果代码片段不存在：**
- 需要重新添加 `homepage-shortcode.php` 的内容
- 参考 `HOMEPAGE_SHORTCODE_GUIDE.md`

### 4.2 测试短代码

1. **创建测试页面**
   - 新建一个页面（标题：测试）
   - 添加短代码：`[sosomama_homepage]`
   - 发布页面

2. **查看前台**
   - 访问测试页面
   - 检查内容是否正常显示

**如果短代码不工作：**
- 检查代码片段是否有错误
- 查看 WordPress 错误日志
- 尝试重新激活代码片段

---

## 🔍 第五步：检查数据库（高级）

如果以上方法都不行，可能是数据库问题：

### 5.1 检查主页设置（数据库）

**使用 phpMyAdmin 或数据库管理工具：**

1. **查找主页设置**
   ```sql
   SELECT * FROM wp_options 
   WHERE option_name = 'show_on_front' 
   OR option_name = 'page_on_front';
   ```

2. **应该看到：**
   - `show_on_front` = `page`（表示使用静态页面）
   - `page_on_front` = 主页页面的 ID（数字）

3. **如果值不正确，手动修复：**
   ```sql
   -- 设置为使用静态页面
   UPDATE wp_options SET option_value = 'page' 
   WHERE option_name = 'show_on_front';
   
   -- 设置主页页面 ID（替换 YOUR_PAGE_ID 为实际页面 ID）
   UPDATE wp_options SET option_value = 'YOUR_PAGE_ID' 
   WHERE option_name = 'page_on_front';
   ```

**⚠️ 警告：直接修改数据库有风险，请先备份！**

---

## 🔍 第六步：恢复备份（如果有）

### 6.1 检查 WordPress 备份

1. **检查主机商备份**
   - 登录您的主机控制面板
   - 查找备份功能
   - 恢复到主页丢失前的日期

2. **检查插件备份**
   - 如果您使用了备份插件（如 UpdraftPlus）
   - 进入插件设置
   - 恢复备份

3. **检查数据库备份**
   - 如果有数据库备份文件
   - 可以只恢复 `wp_options` 表

---

## 🚀 快速修复步骤总结

**如果主页页面存在但未显示：**

1. ✅ **设置** → **阅读** → 选择 **"静态页面"** → 选择主页 → **保存**
2. ✅ 检查主页页面状态是否为 **"已发布"**
3. ✅ 清除缓存（如果使用了缓存插件）

**如果主页页面不存在：**

1. ✅ 创建新页面（标题：主页）
2. ✅ 添加短代码：`[sosomama_homepage]`
3. ✅ 发布页面
4. ✅ **设置** → **阅读** → 选择新创建的页面作为主页
5. ✅ 保存设置

**如果短代码不工作：**

1. ✅ 检查 Code Snippets 插件是否激活
2. ✅ 检查主页短代码片段是否激活
3. ✅ 重新激活代码片段
4. ✅ 检查是否有 PHP 错误

---

## 📞 需要帮助？

如果以上步骤都无法解决问题，请提供以下信息：

1. **WordPress 版本**
2. **当前使用的主题**
3. **主页页面的状态**（是否存在、是否已发布）
4. **错误信息**（如果有）
5. **最近做了什么操作**（更新、安装插件等）

---

## ✅ 预防措施

为了避免将来再次丢失主页：

1. **定期备份**
   - 使用备份插件（如 UpdraftPlus）
   - 或使用主机商提供的备份服务

2. **记录设置**
   - 记录主页页面的 ID
   - 记录重要的 WordPress 设置

3. **使用版本控制**
   - 如果可能，使用 Git 管理代码片段

4. **测试环境**
   - 在测试环境中先测试更改
   - 确认无误后再应用到生产环境

---

**最后更新：** 2024年

