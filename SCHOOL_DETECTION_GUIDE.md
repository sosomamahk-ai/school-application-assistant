# å­¦æ ¡è¯†åˆ«æœºåˆ¶è¯´æ˜

## ğŸ” å­¦æ ¡è¯†åˆ«åŸç†

æ’ä»¶é€šè¿‡ **URL æ¨¡å¼åŒ¹é…** æ¥è‡ªåŠ¨è¯†åˆ«å­¦æ ¡ã€‚å½“ç”¨æˆ·è®¿é—®å­¦æ ¡ç”³è¯·é¡µé¢æ—¶ï¼Œæ’ä»¶ä¼šï¼š

1. **è·å–å½“å‰é¡µé¢ URL**
2. **åŒ¹é…é¢„å®šä¹‰çš„ URL æ¨¡å¼**
3. **è¿”å›å¯¹åº”çš„ schoolId**

## ğŸ“‹ è¯†åˆ«æµç¨‹

```
ç”¨æˆ·è®¿é—®å­¦æ ¡ç”³è¯·é¡µé¢
    â†“
æ’ä»¶è·å–é¡µé¢ URL
    â†“
åŒ¹é… URL æ¨¡å¼åˆ—è¡¨
    â†“
æ‰¾åˆ°åŒ¹é… â†’ æ˜¾ç¤ºè¯†åˆ«çš„å­¦æ ¡ ID
æœªæ‰¾åˆ° â†’ æ˜¾ç¤ºä¸‹æ‹‰èœå•è®©ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©
```

## ğŸ¯ URL æ¨¡å¼é…ç½®

### å½“å‰æ”¯æŒçš„å­¦æ ¡

å­¦æ ¡è¯†åˆ«æ¨¡å¼å®šä¹‰åœ¨ `src/modules/autofill/chrome-extension/utils/detectSchool.js`ï¼š

```javascript
const SCHOOL_URL_PATTERNS = [
  // Oxford University
  { pattern: /ox\.ac\.uk.*msc.*cs/i, schoolId: "oxford_msc_cs" },
  { pattern: /ox\.ac\.uk.*graduate/i, schoolId: "oxford_graduate" },
  { pattern: /ox\.ac\.uk/i, schoolId: "oxford" },
  
  // MIT
  { pattern: /gradapply\.mit\.edu\/meche/i, schoolId: "mit_meche" },
  { pattern: /gradapply\.mit\.edu/i, schoolId: "mit_graduate" },
  { pattern: /mit\.edu.*graduate/i, schoolId: "mit_graduate" },
  
  // Stanford
  { pattern: /gradadmissions\.stanford\.edu/i, schoolId: "stanford_graduate" },
  { pattern: /stanford\.edu.*apply/i, schoolId: "stanford_graduate" },
  
  // Harvard
  { pattern: /gsas\.harvard\.edu.*apply/i, schoolId: "harvard_graduate" },
  { pattern: /harvard\.edu.*graduate.*apply/i, schoolId: "harvard_graduate" },
  
  // Cambridge
  { pattern: /cam\.ac\.uk.*graduate.*apply/i, schoolId: "cambridge_graduate" },
  { pattern: /cam\.ac\.uk/i, schoolId: "cambridge" },
];
```

### æ¨¡å¼åŒ¹é…è§„åˆ™

- **æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…**ï¼šä½¿ç”¨ JavaScript æ­£åˆ™è¡¨è¾¾å¼
- **ä¸åŒºåˆ†å¤§å°å†™**ï¼šæ‰€æœ‰æ¨¡å¼éƒ½ä½¿ç”¨ `i` æ ‡å¿—
- **ä¼˜å…ˆçº§**ï¼šä»ä¸Šåˆ°ä¸‹åŒ¹é…ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…å°±è¿”å›

### ç¤ºä¾‹

| URL | åŒ¹é…çš„æ¨¡å¼ | è¿”å›çš„ schoolId |
|-----|----------|----------------|
| `https://www.ox.ac.uk/graduate/apply` | `ox\.ac\.uk.*graduate` | `oxford_graduate` |
| `https://gradapply.mit.edu/meche` | `gradapply\.mit\.edu\/meche` | `mit_meche` |
| `https://gradadmissions.stanford.edu` | `gradadmissions\.stanford\.edu` | `stanford_graduate` |

## â• æ·»åŠ æ–°å­¦æ ¡

### æ–¹æ³• 1: ä¿®æ”¹ä»£ç ï¼ˆæ°¸ä¹…æ·»åŠ ï¼‰

ç¼–è¾‘ `src/modules/autofill/chrome-extension/utils/detectSchool.js`ï¼š

```javascript
const SCHOOL_URL_PATTERNS = [
  // ... ç°æœ‰æ¨¡å¼ ...
  
  // æ·»åŠ æ–°å­¦æ ¡
  { pattern: /your-school\.edu.*apply/i, schoolId: "your_school_id" },
];
```

### æ–¹æ³• 2: è¿è¡Œæ—¶æ·»åŠ ï¼ˆä¸´æ—¶ï¼‰

åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è¿è¡Œï¼š

```javascript
// è·å– detectSchool å¯¹è±¡ï¼ˆå¦‚æœå·²åŠ è½½ï¼‰
if (window.detectSchool) {
  window.detectSchool.addSchoolPattern(/your-school\.edu/i, 'your_school_id');
}
```

### æ–¹æ³• 3: é€šè¿‡ä¸‹æ‹‰èœå•æ‰‹åŠ¨é€‰æ‹©

å¦‚æœæ— æ³•è‡ªåŠ¨è¯†åˆ«ï¼Œç”¨æˆ·å¯ä»¥ï¼š
1. ç‚¹å‡»æ’ä»¶å›¾æ ‡
2. åœ¨"è¯†åˆ«çš„å­¦æ ¡"éƒ¨åˆ†
3. ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©å­¦æ ¡

ä¸‹æ‹‰èœå•ä¼šæ˜¾ç¤ºï¼š
- ä»åç«¯ API è·å–çš„å­¦æ ¡æ¨¡æ¿åˆ—è¡¨
- å¦‚æœ API ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºé¢„å®šä¹‰çš„å­¦æ ¡åˆ—è¡¨

## ğŸ”§ ä¸‹æ‹‰èœå•é€‰é¡¹æ¥æº

ä¸‹æ‹‰èœå•çš„é€‰é¡¹æœ‰ä¸¤ä¸ªæ¥æºï¼š

### 1. ä»åç«¯ API è·å–ï¼ˆä¼˜å…ˆï¼‰

æ’ä»¶ä¼šè°ƒç”¨ `GET /api/templates` è·å–æ‰€æœ‰å­¦æ ¡æ¨¡æ¿ï¼š

```javascript
const response = await fetch(`${apiUrl}/api/templates`);
const data = await response.json();
const templates = data.templates || [];
```

æ¯ä¸ªæ¨¡æ¿åŒ…å«ï¼š
- `schoolId` - å­¦æ ¡ ID
- `schoolName` - å­¦æ ¡åç§°
- `program` - é¡¹ç›®åç§°

### 2. é¢„å®šä¹‰åˆ—è¡¨ï¼ˆå¤‡ç”¨ï¼‰

å¦‚æœ API ä¸å¯ç”¨ï¼Œä½¿ç”¨é¢„å®šä¹‰çš„å­¦æ ¡åˆ—è¡¨ï¼š

```javascript
const defaultSchools = [
  { schoolId: 'oxford', name: 'Oxford University' },
  { schoolId: 'cambridge', name: 'Cambridge University' },
  // ...
];
```

## ğŸ¨ ç”¨æˆ·ç•Œé¢

### è‡ªåŠ¨è¯†åˆ«æˆåŠŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯†åˆ«çš„å­¦æ ¡              â”‚
â”‚ oxford_msc_cs          â”‚
â”‚ [ğŸ“¤ ä¸Šä¼ æ¨¡æ¿]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è‡ªåŠ¨è¯†åˆ«å¤±è´¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯†åˆ«çš„å­¦æ ¡              â”‚
â”‚ æœªè¯†åˆ«                  â”‚
â”‚ [ä¸‹æ‹‰èœå• â–¼]           â”‚
â”‚   - Oxford University  â”‚
â”‚   - Cambridge...       â”‚
â”‚   - Harvard...         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ— æ³•è¯†åˆ«å­¦æ ¡

**åŸå› **ï¼š
- URL ä¸åœ¨é¢„å®šä¹‰çš„æ¨¡å¼åˆ—è¡¨ä¸­
- URL æ ¼å¼ä¸æ¨¡å¼ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰‹åŠ¨ä»ä¸‹æ‹‰èœå•é€‰æ‹©
2. æ·»åŠ æ–°çš„ URL æ¨¡å¼ï¼ˆè§ä¸Šé¢"æ·»åŠ æ–°å­¦æ ¡"ï¼‰

### é—®é¢˜ 2: ä¸‹æ‹‰èœå•æ²¡æœ‰é€‰é¡¹

**åŸå› **ï¼š
- API è¯·æ±‚å¤±è´¥
- åç«¯æ²¡æœ‰å­¦æ ¡æ¨¡æ¿æ•°æ®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ£€æŸ¥ API URL é…ç½®
3. æ£€æŸ¥åç«¯æ˜¯å¦æœ‰å­¦æ ¡æ¨¡æ¿æ•°æ®
4. ä½¿ç”¨é¢„å®šä¹‰çš„å­¦æ ¡åˆ—è¡¨ï¼ˆä»£ç ä¸­å·²åŒ…å«ï¼‰

### é—®é¢˜ 3: è¯†åˆ«é”™è¯¯çš„å­¦æ ¡

**åŸå› **ï¼š
- URL æ¨¡å¼è¿‡äºå®½æ³›
- å¤šä¸ªæ¨¡å¼éƒ½åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è°ƒæ•´æ¨¡å¼é¡ºåºï¼ˆæ›´å…·ä½“çš„æ¨¡å¼æ”¾åœ¨å‰é¢ï¼‰
2. ä½¿ç”¨æ›´ç²¾ç¡®çš„æ­£åˆ™è¡¨è¾¾å¼

## ğŸ“ æœ€ä½³å®è·µ

1. **æ¨¡å¼é¡ºåº**ï¼šå°†æ›´å…·ä½“çš„æ¨¡å¼æ”¾åœ¨å‰é¢
2. **æ¨¡å¼ç²¾ç¡®æ€§**ï¼šä½¿ç”¨å°½å¯èƒ½ç²¾ç¡®çš„æ­£åˆ™è¡¨è¾¾å¼
3. **æµ‹è¯•**ï¼šæ·»åŠ æ–°æ¨¡å¼åï¼Œæµ‹è¯•å„ç§ URL å˜ä½“
4. **æ–‡æ¡£**ï¼šè®°å½•æ¯ä¸ªæ¨¡å¼å¯¹åº”çš„å®é™…å­¦æ ¡ç½‘ç«™

## ğŸ”„ å·¥ä½œæµç¨‹

### å®Œæ•´æµç¨‹

```
1. ç”¨æˆ·è®¿é—®å­¦æ ¡ç”³è¯·é¡µé¢
   â†“
2. æ’ä»¶åˆå§‹åŒ–ï¼Œè°ƒç”¨ detectSchool()
   â†“
3. background.js æ£€æµ‹ URL
   â†“
4a. æ‰¾åˆ°åŒ¹é… â†’ æ˜¾ç¤ºè¯†åˆ«çš„ schoolId
4b. æœªæ‰¾åˆ° â†’ æ˜¾ç¤ºä¸‹æ‹‰èœå•
   â†“
5. ç”¨æˆ·é€‰æ‹©å­¦æ ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰
   â†“
6. ä½¿ç”¨ schoolId è¿›è¡Œåç»­æ“ä½œ
   - ä¸Šä¼ æ¨¡æ¿
   - è·å–ç”³è¯·æ•°æ®
   - è‡ªåŠ¨å¡«å……
```

## ğŸ’¡ æç¤º

- **ä¼˜å…ˆè‡ªåŠ¨è¯†åˆ«**ï¼šå°½é‡æ·»åŠ  URL æ¨¡å¼ï¼Œå‡å°‘ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©
- **æä¾›å¤‡é€‰**ï¼šä¸‹æ‹‰èœå•ç¡®ä¿å³ä½¿æ— æ³•è¯†åˆ«ä¹Ÿèƒ½ä½¿ç”¨
- **ç”¨æˆ·å‹å¥½**ï¼šæ˜¾ç¤ºå­¦æ ¡åç§°è€Œä¸æ˜¯ IDï¼Œæå‡å¯è¯»æ€§

