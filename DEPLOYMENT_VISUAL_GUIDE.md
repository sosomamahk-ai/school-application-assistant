# 🎨 部署可视化教程

用图表和图示理解部署全过程

---

## 🗺️ 整体流程图

```
┌─────────────────────────────────────────────────────────────┐
│                     部署全流程                               │
└─────────────────────────────────────────────────────────────┘

      您的电脑                GitHub               Vercel
    ┌──────────┐            ┌──────────┐         ┌──────────┐
    │          │  上传代码   │          │ 自动构建 │          │
    │  💻代码   │  ═══════>  │  ☁️存储   │ ═══════> │  🚀部署   │
    │          │            │          │         │          │
    └──────────┘            └──────────┘         └──────────┘
         ↑                                            ↓
         │                                            │
         │                                            ↓
         │                                   ┌─────────────┐
         │                                   │  🌐互联网    │
         └───────────── 访问 URL ─────────────│  全球可访问  │
                                            └─────────────┘
```

---

## 📍 第一步：准备工作

### 需要准备的账号

```
┌─────────────────────────────────────────────┐
│  需要注册的账号（全部免费）                  │
├─────────────────────────────────────────────┤
│                                              │
│  1. GitHub 账号                              │
│     🔗 https://github.com                   │
│     📝 用途：存储代码                        │
│                                              │
│  2. Vercel 账号                              │
│     🔗 https://vercel.com                   │
│     📝 用途：部署应用                        │
│                                              │
│  3. Supabase 账号（数据库）                  │
│     🔗 https://supabase.com                 │
│     📝 用途：存储数据                        │
│                                              │
│  4. OpenAI 账号（已有）                      │
│     🔗 https://platform.openai.com          │
│     📝 用途：AI 功能                         │
│                                              │
└─────────────────────────────────────────────┘
```

### 需要安装的工具

```
┌──────────────────────────────────────────────┐
│  需要安装的软件                               │
├──────────────────────────────────────────────┤
│                                               │
│  ✅ Node.js（必需）                           │
│     下载：https://nodejs.org                 │
│     版本：18.0 以上                           │
│     验证：node --version                     │
│                                               │
│  ✅ Git（必需）                               │
│     下载：https://git-scm.com                │
│     验证：git --version                      │
│                                               │
│  📦 GitHub Desktop（可选，推荐新手）          │
│     下载：https://desktop.github.com         │
│     作用：图形界面，更简单                    │
│                                               │
└──────────────────────────────────────────────┘
```

---

## 📍 第二步：上传代码到 GitHub

### 方式A：使用命令行

```
┌────────────────────────────────────────────────────┐
│  命令行步骤                                         │
└────────────────────────────────────────────────────┘

步骤1: 打开命令行，进入项目文件夹
┌────────────────────────────────────┐
│ $ cd school-application-assistant  │
└────────────────────────────────────┘

步骤2: 初始化 Git
┌────────────────────────────────────┐
│ $ git init                         │
│ Initialized empty Git repository   │
└────────────────────────────────────┘

步骤3: 添加所有文件
┌────────────────────────────────────┐
│ $ git add .                        │
│ (没有输出表示成功)                  │
└────────────────────────────────────┘

步骤4: 提交文件
┌────────────────────────────────────┐
│ $ git commit -m "Initial commit"   │
│ [main 1234567] Initial commit      │
│ 50 files changed                   │
└────────────────────────────────────┘

步骤5: 连接 GitHub（先在网站创建仓库）
┌────────────────────────────────────┐
│ $ git remote add origin            │
│   https://github.com/你的用户名/   │
│   school-application-assistant.git │
└────────────────────────────────────┘

步骤6: 推送代码
┌────────────────────────────────────┐
│ $ git push -u origin main          │
│ Enumerating objects: 100, done.    │
│ Writing objects: 100% (100/100)    │
└────────────────────────────────────┘
```

### 方式B：使用 GitHub Desktop（推荐新手）

```
┌─────────────────────────────────────────────────────┐
│  GitHub Desktop 图形界面步骤                         │
└─────────────────────────────────────────────────────┘

步骤1: 打开 GitHub Desktop
  ┌─────────────────────────┐
  │  GitHub Desktop         │
  │  ┌─────────────────┐   │
  │  │ File            │   │
  │  │ └─ Add Local    │   │
  │  │    Repository   │   │
  │  └─────────────────┘   │
  └─────────────────────────┘

步骤2: 选择项目文件夹
  ┌─────────────────────────┐
  │  Choose a repository    │
  │  ┌─────────────────┐   │
  │  │ 📁 Documents     │   │
  │  │   📁 school-app  │   │
  │  │     ✓ 选择这个   │   │
  │  └─────────────────┘   │
  │  [Add Repository]       │
  └─────────────────────────┘

步骤3: Publish（发布）到 GitHub
  ┌─────────────────────────┐
  │  Publish repository     │
  │  ┌─────────────────┐   │
  │  │ Name: school-app│   │
  │  │ [✓] Public      │   │
  │  │                 │   │
  │  │ [Publish]       │   │
  │  └─────────────────┘   │
  └─────────────────────────┘

✅ 完成！代码已上传
```

---

## 📍 第三步：在 Vercel 部署

### 可视化步骤

```
┌─────────────────────────────────────────────────────┐
│  Vercel 部署界面示意                                 │
└─────────────────────────────────────────────────────┘

界面1: Vercel 首页
┌─────────────────────────────────────┐
│  Vercel                    [Login]  │
│  ┌───────────────────────────────┐ │
│  │  Welcome to Vercel            │ │
│  │                               │ │
│  │  [Continue with GitHub]  ←点这│ │
│  │  [Continue with GitLab]       │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘


界面2: 授权 GitHub
┌─────────────────────────────────────┐
│  Authorize Vercel                   │
│  ┌───────────────────────────────┐ │
│  │  Vercel wants to:             │ │
│  │  ✓ Read your repositories     │ │
│  │  ✓ Deploy your projects       │ │
│  │                               │ │
│  │  [Authorize Vercel]      ←点这│ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘


界面3: 导入项目
┌─────────────────────────────────────┐
│  Import Git Repository              │
│  ┌───────────────────────────────┐ │
│  │  🔍 Search repositories...    │ │
│  │                               │ │
│  │  📁 school-application-       │ │
│  │     assistant      [Import]←点│ │
│  │                               │ │
│  │  📁 my-other-project          │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘


界面4: 配置项目
┌─────────────────────────────────────┐
│  Configure Project                  │
│  ┌───────────────────────────────┐ │
│  │ Project Name:                 │ │
│  │ [school-application-assistant]│ │
│  │                               │ │
│  │ Framework: Next.js  (自动检测)│ │
│  │                               │ │
│  │ Environment Variables: ←重要! │ │
│  │ [Add Variable]           ←点这│ │
│  │                               │ │
│  │              [Deploy]    ←最后│ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘


界面5: 构建中
┌─────────────────────────────────────┐
│  Building...                        │
│  ┌───────────────────────────────┐ │
│  │  ⚙️ Installing dependencies   │ │
│  │  ▓▓▓▓▓▓░░░░░░ 50%            │ │
│  │                               │ │
│  │  📝 Build logs:               │ │
│  │  > npm install                │ │
│  │  > npm run build              │ │
│  │  > Creating optimized build   │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘


界面6: 部署成功！
┌─────────────────────────────────────┐
│  🎉 Congratulations!                │
│  ┌───────────────────────────────┐ │
│  │  Your project is live at:     │ │
│  │                               │ │
│  │  🔗 school-app-abc123.        │ │
│  │     vercel.app      [Copy]    │ │
│  │                               │ │
│  │  [Visit] [View Logs]          │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘
```

---

## 📍 第四步：配置环境变量

### 环境变量可视化

```
┌─────────────────────────────────────────────────────┐
│  Vercel Environment Variables 界面                   │
└─────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────┐
│  Settings → Environment Variables                 │
│                                                   │
│  Add New Variable:                                │
│  ┌─────────────────────────────────────────────┐│
│  │ Name:     [DATABASE_URL                    ]││
│  │ Value:    [postgresql://user:pass@host/db  ]││
│  │ Environments: [✓] Production               ││
│  │               [✓] Preview                  ││
│  │               [✓] Development              ││
│  │                                [Add]  ←点这 ││
│  └─────────────────────────────────────────────┘│
│                                                   │
│  现有变量:                                        │
│  ┌─────────────────────────────────────────────┐│
│  │ DATABASE_URL         postgresql://...       ││
│  │ OPENAI_API_KEY       sk-proj-...            ││
│  │ JWT_SECRET           XyZ123...              ││
│  │ NEXT_PUBLIC_APP_URL  https://your-app...    ││
│  └─────────────────────────────────────────────┘│
└───────────────────────────────────────────────────┘
```

### 环境变量来源图

```
┌────────────────────────────────────────────────┐
│  环境变量从哪里获取？                           │
└────────────────────────────────────────────────┘

DATABASE_URL
  ↓
来自 Supabase
  ┌─────────────────────────────┐
  │ Supabase 项目页面           │
  │ → Settings → Database       │
  │ → Connection String         │
  │ → 复制 URI                  │
  └─────────────────────────────┘

OPENAI_API_KEY
  ↓
来自 OpenAI
  ┌─────────────────────────────┐
  │ OpenAI Platform             │
  │ → API Keys                  │
  │ → Create new secret key     │
  │ → 复制 Key                  │
  └─────────────────────────────┘

JWT_SECRET
  ↓
自己生成
  ┌─────────────────────────────┐
  │ 在命令行运行：              │
  │ openssl rand -base64 32     │
  │ 或                          │
  │ node -e "console.log(       │
  │   require('crypto')         │
  │   .randomBytes(32)          │
  │   .toString('base64'))"     │
  └─────────────────────────────┘

NEXT_PUBLIC_APP_URL
  ↓
来自 Vercel
  ┌─────────────────────────────┐
  │ 部署成功后的 URL            │
  │ 例如：                      │
  │ https://school-app-         │
  │ abc123.vercel.app           │
  └─────────────────────────────┘
```

---

## 📍 第五步：配置数据库

### Supabase 设置流程

```
┌─────────────────────────────────────────────────────┐
│  Supabase 数据库创建流程                             │
└─────────────────────────────────────────────────────┘

界面1: Supabase 首页
┌─────────────────────────────────────┐
│  Supabase                           │
│  ┌───────────────────────────────┐ │
│  │  Start your project           │ │
│  │                               │ │
│  │  [Sign in with GitHub]   ←点这│ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘

界面2: 创建组织
┌─────────────────────────────────────┐
│  Create an organization             │
│  ┌───────────────────────────────┐ │
│  │ Organization name:            │ │
│  │ [My Organization]             │ │
│  │                               │ │
│  │ [Create organization]    ←点这│ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘

界面3: 创建项目
┌─────────────────────────────────────┐
│  New Project                        │
│  ┌───────────────────────────────┐ │
│  │ Name: [school-app-db]         │ │
│  │                               │ │
│  │ Database Password:            │ │
│  │ [●●●●●●●●●●●]  [Generate] ←点│ │
│  │                               │ │
│  │ Region: [Hong Kong] ▼    ←选择│ │
│  │                               │ │
│  │ Pricing: Free                 │ │
│  │                               │ │
│  │ [Create new project]     ←点这│ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘

界面4: 等待创建（约2分钟）
┌─────────────────────────────────────┐
│  Setting up your project...         │
│  ┌───────────────────────────────┐ │
│  │  ⏳ Preparing your database   │ │
│  │                               │ │
│  │  ▓▓▓▓▓▓▓▓░░░░ 75%            │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘

界面5: 获取连接字符串
┌─────────────────────────────────────┐
│  Project Settings                   │
│  ┌───────────────────────────────┐ │
│  │ Database                      │ │
│  │                               │ │
│  │ Connection String:            │ │
│  │ URI ▼                         │ │
│  │                               │ │
│  │ postgresql://postgres.xxx:    │ │
│  │ [YOUR-PASSWORD]@xxx/postgres  │ │
│  │                        [Copy] │ │
│  │                               │ │
│  │ 记得替换 [YOUR-PASSWORD] ↑   │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘
```

---

## 🔄 数据库迁移流程

```
┌─────────────────────────────────────────────────────┐
│  运行数据库迁移（在本地电脑）                        │
└─────────────────────────────────────────────────────┘

步骤1: 在项目文件夹打开命令行
┌────────────────────────────────────┐
│ $ cd school-application-assistant  │
└────────────────────────────────────┘

步骤2: 设置数据库连接
┌────────────────────────────────────┐
│ # Windows PowerShell               │
│ $ $env:DATABASE_URL="postgresql://│
│   your-connection-string"          │
│                                    │
│ # Mac/Linux                        │
│ $ export DATABASE_URL="postgresql:│
│   //your-connection-string"        │
└────────────────────────────────────┘

步骤3: 运行迁移
┌────────────────────────────────────┐
│ $ npx prisma migrate deploy        │
│                                    │
│ 输出：                             │
│ ✓ Applying migration 20240101_init │
│ ✓ Database is up to date           │
└────────────────────────────────────┘

步骤4: 添加示例数据
┌────────────────────────────────────┐
│ $ npm run prisma:seed              │
│                                    │
│ 输出：                             │
│ Starting seed...                   │
│ Created template: Harvard...       │
│ Created template: Stanford...      │
│ Created template: MIT...           │
│ ✓ Seed completed!                  │
└────────────────────────────────────┘

✅ 数据库配置完成！
```

---

## ✅ 验证清单

### 部署成功检查表

```
┌─────────────────────────────────────────────────────┐
│  检查项目                                            │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ☐ 1. Vercel 显示绿色的 "Ready"                    │
│       项目页面状态：🟢 Ready                        │
│                                                     │
│  ☐ 2. 访问 URL 能打开网站                           │
│       https://your-app.vercel.app ✓                │
│                                                     │
│  ☐ 3. 首页正常显示                                  │
│       能看到 "School Application Assistant"         │
│                                                     │
│  ☐ 4. 注册功能正常                                  │
│       能成功创建账户                                │
│                                                     │
│  ☐ 5. 登录功能正常                                  │
│       能用新账户登录                                │
│                                                     │
│  ☐ 6. Dashboard 显示                                │
│       登录后能看到申请列表页面                       │
│                                                     │
│  ☐ 7. 数据库连接正常                                │
│       能创建和保存数据                              │
│                                                     │
│  ☐ 8. AI 功能可用（可选）                           │
│       能生成内容和指导                              │
│                                                     │
│  ☐ 9. WordPress 集成正常                            │
│       iframe 或短代码能正常显示                     │
│                                                     │
│  ☐ 10. 移动端显示正常                               │
│        手机访问布局正常                             │
│                                                     │
└─────────────────────────────────────────────────────┘

全部打勾 = 🎉 部署成功！
```

---

## 🎯 快速测试步骤

### 1分钟快速测试

```
测试1: 访问首页
  浏览器输入 → https://your-app.vercel.app
  应该看到 → 漂亮的首页，有"Get Started"按钮
  ✓ 通过

测试2: 注册账户
  点击 → Get Started
  填写 → 邮箱、密码、姓名
  点击 → Create account
  应该 → 自动登录并跳转
  ✓ 通过

测试3: 查看 Dashboard
  登录后 → 应该看到"My Applications"页面
  显示 → "No applications yet"
  有按钮 → "New Application"
  ✓ 通过

测试4: 创建申请
  点击 → New Application
  选择 → Harvard University
  应该 → 跳转到申请表单页面
  ✓ 通过

测试5: AI 功能（可选）
  在表单页 → 右侧有 AI Guidance 面板
  显示 → 字段说明和建议
  ✓ 通过

全部通过 = 🎉 完美！
```

---

## 📱 从各种设备访问

### 访问方式示意

```
┌─────────────────────────────────────────────────────┐
│  多设备访问                                          │
└─────────────────────────────────────────────────────┘

💻 电脑浏览器
  ┌─────────────────────────────────┐
  │ Chrome / Edge / Safari / Firefox│
  │ https://your-app.vercel.app     │
  │ ✓ 完整功能                      │
  └─────────────────────────────────┘

📱 手机浏览器
  ┌─────────────────────────────────┐
  │ Safari (iOS) / Chrome (Android) │
  │ 相同的 URL                       │
  │ ✓ 自动适配移动端                │
  └─────────────────────────────────┘

🖥️ WordPress 网站
  ┌─────────────────────────────────┐
  │ 使用 iframe 或短代码嵌入         │
  │ [school_app]                    │
  │ ✓ 与网站融为一体                │
  └─────────────────────────────────┘

📧 分享链接
  ┌─────────────────────────────────┐
  │ 复制 URL 发给任何人              │
  │ https://your-app.vercel.app     │
  │ ✓ 所有人都能访问                │
  └─────────────────────────────────┘
```

---

## 🎓 总结

### 部署本质

```
┌─────────────────────────────────────────────┐
│  部署就是让您的应用从：                      │
│                                             │
│  ❌ 只在您的电脑上运行                       │
│                                             │
│  变成                                        │
│                                             │
│  ✅ 在互联网上24小时运行，全球可访问         │
│                                             │
└─────────────────────────────────────────────┘
```

### 关键要素

```
┌─────────────┬──────────────┬──────────────┐
│   代码      │   服务器     │    域名      │
├─────────────┼──────────────┼──────────────┤
│             │              │              │
│  📝 您编写   │  🖥️ Vercel   │  🌐 vercel  │
│  的程序      │  提供        │  .app       │
│             │              │              │
│  存在       │  运行在      │  访问通过    │
│  GitHub     │  云端        │  URL         │
│             │              │              │
└─────────────┴──────────────┴──────────────┘
```

---

## 🎉 恭喜！

如果您看到这里，说明您已经了解了部署的全过程！

**记住**：
- 🐢 第一次部署可能会慢一些
- 💡 遇到错误很正常，查看日志解决
- 📚 多看文档，多尝试
- 💪 您一定可以成功的！

---

**有任何疑问随时问我！** 😊

我会手把手帮您解决每一个问题！

