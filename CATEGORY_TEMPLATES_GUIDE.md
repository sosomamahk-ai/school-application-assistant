# 📚 学校模板分类系统使用指南

## 🎯 功能概述

现在学校申请模板已经分为 **5 个类别**，管理员可以：
1. ✅ 按类别筛选模板
2. ✅ 基于预设类别模板快速创建新学校
3. ✅ 直观地管理不同类型的学校申请

---

## 🏫 5 个模板类别

| 类别 | 说明 | 适用范围 | 颜色标签 |
|------|------|---------|---------|
| **国际学校** | 国际学校申请表 | IB、IGCSE、A-Level 学校 | 🔵 蓝色 |
| **香港本地中学** | 香港中学入学申请 | 直资、津贴、官立中学 | 🟢 绿色 |
| **香港本地小学** | 香港小学入学申请 | 本地小学、小一入学 | 🟡 黄色 |
| **香港幼稚园** | 幼稚园入学申请 | N班、K1-K3 | 🩷 粉色 |
| **大学** | 大学本科/研究生申请 | 本地/海外大学 | 🟣 紫色 |

---

## 🚀 第1步：导入预设模板到数据库

### 方法1：使用 Supabase SQL Editor（推荐）

1. **登录 Supabase**
   ```
   https://supabase.com/dashboard
   ```

2. **进入 SQL Editor**
   - 左侧菜单点击 **"SQL Editor"**
   - 点击 **"New query"**

3. **运行 SQL 脚本**
   - 打开项目文件 `template-examples/category-templates.sql`
   - 复制所有内容
   - 粘贴到 SQL Editor
   - 点击 **"Run"** 或按 `Ctrl + Enter`

4. **验证导入**
   - 在底部看到成功消息
   - 滚动到脚本最后，会显示所有模板列表

### 方法2：使用 Prisma Migrate（可选）

如果您更熟悉命令行：

```bash
cd C:\school-application-assistant
npx prisma db push
```

然后按照方法1导入 SQL 脚本

---

## 🎨 第2步：访问模板管理页面

### 访问URL

```
https://school-application-assistant.vercel.app/admin/templates
```

### 您将看到：

1. **顶部导航栏**
   - 5 个类别筛选按钮（全部、国际学校、香港本地中学、香港本地小学、香港幼稚园、大学）
   - 每个类别显示模板数量

2. **两个模板区域**
   - **系统预设模板**（蓝色标题栏）
     - 5 个类别的标准模板
     - 不可删除，但可以基于它们创建新模板
   - **我的模板**（绿色标题栏）
     - 您创建的所有学校模板

3. **颜色标签**
   - 每个模板都有彩色类别标签
   - 一目了然地识别模板类型

---

## ✨ 第3步：基于类别模板创建新学校

### 方式1：从创建菜单选择（推荐）

1. **点击"创建新模板"按钮**
   - 会弹出下拉菜单

2. **选择一个选项**
   - **从空白创建** - 从零开始
   - **基于类别模板创建** - 选择 5 个预设模板之一

3. **选择预设模板**
   - 点击任一预设模板（如"[模板] 国际学校"）
   - 系统会自动：
     - ✅ 复制所有字段和设置
     - ✅ 预填充表单结构
     - ✅ 保留类别设置
     - ✅ 清空学校ID（您需要填写新的）

4. **修改并保存**
   - 修改 **学校ID**（必须唯一，如 `harrow-hk-2024`）
   - 修改 **学校名称**（如"哈罗香港国际学校"）
   - 修改 **项目名称**（如"2024-2025 年度入学"）
   - 根据实际学校需求调整字段
   - 点击"保存模板"

### 方式2：从系统模板卡片复制

1. **找到系统预设模板**
   - 在"系统预设模板"区域

2. **点击"复制"图标**
   - 模板卡片右侧有一个"复制"按钮（Copy图标）

3. **自动跳转到创建页面**
   - 所有字段已预填充

---

## 🔍 第4步：使用类别筛选

### 筛选特定类别

1. **点击类别按钮**
   - 页面顶部的类别筛选栏
   - 点击任一类别（如"国际学校"）

2. **查看筛选结果**
   - 只显示该类别的模板
   - 显示该类别的模板数量

3. **返回全部**
   - 点击"全部"按钮

---

## 📋 各类别模板包含的字段

### 1. 国际学校模板

**包含字段：**
- 学生信息（中英文姓名、常用名、性别、国籍、生日、护照）
- 现有教育背景（当前学校、年级、年级制度、GPA）
- 语言能力（母语、英语水平、标化考试成绩）
- 家长信息（姓名、电话、邮箱）
- 个人陈述（Personal Statement）
- 特殊情况说明

**适用场景：**
- IB 学校
- IGCSE/A-Level 学校
- 美式国际学校
- 加拿大/澳洲课程学校

---

### 2. 香港本地中学模板

**包含字段：**
- 学生基本资料（中英文姓名、香港身份证、性别、生日）
- 就读学校资料（小学名称、年级、中英数成绩）
- 家长资料（父母姓名、电话、家庭住址）
- 课外活动及获奖
- 申请原因

**适用场景：**
- 直资中学
- 津贴中学
- 官立中学
- 小升中申请

---

### 3. 香港本地小学模板

**包含字段：**
- 儿童资料（中英文姓名、身份证/出生证明、性别、生日）
- 幼稚园资料（幼稚园名称、班级）
- 家长资料（父母中英文姓名、电话、邮箱、地址）
- 兄弟姊妹资料
- 特殊需要

**适用场景：**
- 直资小学
- 私立小学
- 小一入学申请

---

### 4. 香港幼稚园模板

**包含字段：**
- 幼儿资料（中英文姓名、小名、出生证明、性别、生日）
- 申请班级（N班/K1/K2/K3、上午/下午/全日班）
- 家长/监护人资料（父母姓名、职业、电话、地址）
- 健康状况
- 紧急联络人

**适用场景：**
- 幼稚园入学
- N班申请
- K1-K3 转校

---

### 5. 大学模板

**包含字段：**
- Personal Information（全名、中文名、性别、国籍、护照、生日、联系方式）
- Academic Background（中学、毕业日期、GPA、SAT/ACT、TOEFL/IELTS）
- Program Selection（第一/第二志愿专业、入学学期）
- Personal Statement（个人陈述）
- Extracurricular Activities（课外活动）
- Honors and Awards（荣誉与奖项）

**适用场景：**
- 香港大学本科申请
- 海外大学申请
- 研究生申请
- JUPAS 申请

---

## 🎯 使用场景示例

### 场景1：添加一所新的国际学校

1. 点击"创建新模板" → 选择"[模板] 国际学校"
2. 修改：
   - 学校ID: `harrow-hk-2024`
   - 学校名称: `哈罗香港国际学校`
   - 项目名称: `2024-2025 年度入学申请`
   - 类别: 保持"国际学校"
3. 根据哈罗的实际申请表调整字段
4. 保存

### 场景2：添加一所本地小学

1. 点击"创建新模板" → 选择"[模板] 香港本地小学"
2. 修改：
   - 学校ID: `spcs-2024`
   - 学校名称: `拔萃男书院附属小学`
   - 项目名称: `2024年小一入学申请`
   - 类别: 保持"香港本地小学"
3. 添加/删除特定字段
4. 保存

### 场景3：添加大学申请

1. 点击"创建新模板" → 选择"[模板] 大学"
2. 修改：
   - 学校ID: `hku-2024-undergraduate`
   - 学校名称: `香港大学`
   - 项目名称: `2024年本科入学申请`
   - 类别: 保持"大学"
3. 调整专业选项、成绩要求等
4. 保存

---

## 🔧 高级功能

### 修改类别

创建模板时，可以修改类别：

1. 在"基本信息"部分
2. 找到"模板类别"下拉菜单
3. 选择新类别
4. 保存

### 导出和导入模板

- **导出**：点击模板卡片上的"下载"图标
- **导入**：点击顶部"导入模板"按钮

### 自动填充规则（AI Fill Rule）

每个字段都可以设置 `aiFillRule`，系统会自动从用户资料提取数据：

```json
{
  "aiFillRule": "chineseLastName + chineseFirstName",
  "aiFillRule": "parents[0].name",
  "aiFillRule": "education[0].schoolName"
}
```

---

## 📊 模板管理最佳实践

### 1. 命名规范

**学校ID 命名建议：**
- 使用小写字母和连字符
- 包含学校简称和年份
- 示例：
  - `harrow-hk-2024`
  - `spcs-primary-2024`
  - `hku-undergraduate-2024`

**学校名称建议：**
- 使用完整的正式名称
- 中英文都可以
- 示例：
  - `哈罗香港国际学校`
  - `拔萃男书院附属小学`
  - `香港大学`

### 2. 类别选择

| 如果学校是... | 选择类别 |
|-------------|---------|
| 国际课程（IB/IGCSE/AP） | 国际学校 |
| 本地中学（Form 1-6） | 香港本地中学 |
| 本地小学（P1-6） | 香港本地小学 |
| 幼稚园（N班-K3） | 香港幼稚园 |
| 大学/学院 | 大学 |

### 3. 字段设置

- **必填字段**：勾选"必填"选项
- **帮助文本**：为复杂字段添加说明
- **自动填充**：设置 `aiFillRule` 提高效率
- **字段排序**：重要字段放在前面

---

## ❓ 常见问题

### Q1: 我可以删除系统预设模板吗？

**答：** 不建议删除。系统预设模板是用来快速创建新学校的基础。如果不需要显示，可以在筛选时忽略。

### Q2: 我创建的模板会出现在"系统预设模板"吗？

**答：** 不会。只有 `schoolId` 以 `template-` 开头的模板才会显示在系统预设区域。您创建的模板都在"我的模板"区域。

### Q3: 如何修改已有模板的类别？

**答：** 
1. 点击模板卡片的"编辑"按钮
2. 在 JSON 编辑器中找到 `"category"` 字段
3. 修改为新类别（如 `"category": "国际学校"`）
4. 保存

### Q4: 类别筛选后，为什么有些模板没有显示？

**答：** 只有该类别的模板会显示。点击"全部"可以看到所有模板。

### Q5: 如何让学生看到这些学校申请表？

**答：** 
1. 确保模板的 `isActive` 为 `true`（已启用）
2. 学生在前台访问 `/schools` 页面
3. 点击学校即可开始申请

---

## 🎉 快速开始清单

- [ ] 在 Supabase SQL Editor 运行 `category-templates.sql`
- [ ] 访问 `https://school-application-assistant.vercel.app/admin/templates`
- [ ] 验证看到 5 个系统预设模板
- [ ] 尝试筛选不同类别
- [ ] 基于"国际学校"模板创建第一所学校
- [ ] 修改学校ID、名称、项目名称
- [ ] 调整字段以匹配实际申请表
- [ ] 保存并测试

---

## 📞 需要帮助？

如果您在使用过程中遇到任何问题：

1. **检查 Vercel 部署日志**
   - https://vercel.com/sosomamas-projects/school-application-assistant
   
2. **检查 Supabase 数据库**
   - SQL Editor → 运行：`SELECT * FROM "SchoolFormTemplate"`
   
3. **查看控制台错误**
   - 浏览器 F12 → Console 标签

---

## 🚀 下一步

- ✅ 完成所有学校模板创建
- ✅ 测试学生申请流程
- ✅ 配置 AI 自动填充规则
- ✅ 自定义每所学校的特殊字段
- ✅ 导出模板备份

---

**祝您使用愉快！** 🎊

