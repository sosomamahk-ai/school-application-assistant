# 🌍 多语言功能使用指南

## 📋 功能说明

学校申请助手现在支持**中文**和**英文**两种语言，用户可以自由切换界面语言！

### ✨ 主要特点

- 🔄 **实时切换**：点击语言按钮即可切换，无需刷新页面
- 💾 **自动保存**：系统会记住你选择的语言偏好
- 🌐 **全面覆盖**：所有页面和组件都支持多语言
- 🎯 **智能检测**：首次访问时自动检测浏览器语言

---

## 🎯 如何使用

### 方法1：在首页切换

1. 打开应用首页
2. 在右上角导航栏找到**语言切换按钮**（显示为 "中文" 或 "EN"）
3. 点击按钮即可切换语言

```
导航栏：  [中文] | 登录 | 开始使用
           ↑
        点击这里
```

### 方法2：在登录页切换

1. 进入登录或注册页面
2. 右上角有语言切换按钮
3. 切换后表单文字会立即更新

### 方法3：在应用内切换

登录后，在任何页面的顶部导航栏都可以找到语言切换按钮。

---

## 🔧 技术实现说明

### 文件结构

```
src/
├── config/
│   └── translations.ts          # 翻译配置文件（中英文对照）
├── contexts/
│   └── LanguageContext.tsx      # 语言上下文管理
├── components/
│   └── LanguageSwitch.tsx       # 语言切换组件
└── pages/
    ├── _app.tsx                 # 应用入口（启用多语言）
    ├── index.tsx                # 首页（已更新）
    ├── dashboard.tsx            # 仪表板（已更新）
    ├── auth/
    │   └── login.tsx            # 登录页（已更新）
    └── components/
        └── Layout.tsx           # 布局组件（已更新）
```

---

## 📝 为开发者：如何使用翻译系统

### 1. 在页面中使用翻译

```typescript
import { useLanguage } from '@/contexts/LanguageContext';

export default function MyPage() {
  const { t } = useLanguage();
  
  return (
    <div>
      <h1>{t.common.appName}</h1>
      <button>{t.common.save}</button>
    </div>
  );
}
```

### 2. 访问当前语言

```typescript
const { language, setLanguage } = useLanguage();

console.log(language); // 'zh' 或 'en'

// 切换语言
setLanguage('en');
```

### 3. 添加新的翻译文本

在 `src/config/translations.ts` 中添加：

```typescript
export const translations: Record<Language, Translations> = {
  zh: {
    // 中文翻译
    myNewSection: {
      title: '我的标题',
      description: '我的描述'
    }
  },
  en: {
    // English translations
    myNewSection: {
      title: 'My Title',
      description: 'My Description'
    }
  }
};
```

然后在组件中使用：

```typescript
<h1>{t.myNewSection.title}</h1>
<p>{t.myNewSection.description}</p>
```

---

## 🎨 语言切换组件的两种样式

### 样式1：简洁版（用于导航栏）

```typescript
<LanguageSwitch variant="minimal" />
```

显示效果：`🌐 中文` 或 `🌐 EN`

### 样式2：标准版（用于设置页面）

```typescript
<LanguageSwitch />
```

显示效果：带边框的完整按钮，显示当前语言和切换提示

---

## 🔍 已翻译的内容

### ✅ 完全支持多语言的页面

- ✅ **首页** (`/`)
  - 标题、副标题
  - 功能介绍
  - 使用步骤
  - 行动号召
  - 页脚

- ✅ **登录页** (`/auth/login`)
  - 表单标签
  - 按钮文字
  - 提示信息

- ✅ **仪表板** (`/dashboard`)
  - 页面标题
  - 申请卡片
  - 操作按钮
  - 模态框

- ✅ **导航栏** (Layout)
  - 应用名称
  - 菜单项
  - 退出登录

### 📦 翻译分类

#### 通用文本 (`common`)
- 应用名称、登录、注册、保存、取消等

#### 首页文本 (`home`)
- 标题、特性介绍、使用步骤、CTA

#### 认证文本 (`auth`)
- 登录、注册表单的所有文字

#### 仪表板文本 (`dashboard`)
- 申请列表、状态、操作等

#### 个人资料文本 (`profile`)
- 资料字段标签

#### AI功能文本 (`ai`)
- AI提示、建议、生成等

---

## 🌟 最佳实践

### 1. 添加新页面时

确保从一开始就使用翻译系统：

```typescript
// ❌ 不要硬编码文字
<h1>My Applications</h1>

// ✅ 使用翻译
<h1>{t.dashboard.title}</h1>
```

### 2. 动态内容

某些内容（如用户输入的数据、数据库中的内容）不需要翻译：

```typescript
// 这些不需要翻译
<h2>{application.schoolName}</h2>  // 学校名称
<p>{user.email}</p>                // 用户邮箱

// 但标签需要翻译
<label>{t.auth.login.email}</label>
```

### 3. 日期格式

使用 `toLocaleDateString()` 会自动根据浏览器语言格式化日期：

```typescript
{new Date(app.updatedAt).toLocaleDateString()}
```

---

## 🚀 扩展到其他语言

想添加其他语言（如西班牙语、法语）？

### 步骤：

1. **更新语言类型**

在 `src/config/translations.ts` 中：

```typescript
export type Language = 'zh' | 'en' | 'es'; // 添加 'es' 代表西班牙语
```

2. **添加翻译**

```typescript
export const translations: Record<Language, Translations> = {
  zh: { /* 中文翻译 */ },
  en: { /* 英文翻译 */ },
  es: {
    // 西班牙语翻译
    common: {
      appName: 'Asistente de Aplicación Escolar',
      login: 'Iniciar sesión',
      // ... 其他翻译
    }
  }
};
```

3. **更新语言切换组件**

修改 `src/components/LanguageSwitch.tsx` 以支持多个语言选项。

---

## 💡 常见问题

### Q1: 切换语言后需要刷新页面吗？

**不需要！** 语言切换是即时的，所有已加载的内容都会立即更新。

### Q2: 我的语言选择会被保存吗？

**会的！** 系统使用 `localStorage` 保存你的语言偏好，下次访问时会自动使用你上次选择的语言。

### Q3: 如何更改默认语言？

编辑 `src/contexts/LanguageContext.tsx`：

```typescript
const [language, setLanguageState] = useState<Language>('en'); // 改成 'en' 设置英文为默认
```

### Q4: 翻译不完整怎么办？

如果发现某些文字没有翻译，请：
1. 在 `src/config/translations.ts` 中添加相应的翻译
2. 更新使用该文字的组件，使用 `t.xxx.xxx` 格式

### Q5: 如何修改已有的翻译？

直接编辑 `src/config/translations.ts` 文件中对应语言的文字即可。

---

## 🎓 示例：完整页面的多语言实现

```typescript
import { useLanguage } from '@/contexts/LanguageContext';
import LanguageSwitch from '@/components/LanguageSwitch';

export default function MyPage() {
  const { t, language } = useLanguage();
  
  return (
    <div>
      {/* 显示语言切换按钮 */}
      <LanguageSwitch variant="minimal" />
      
      {/* 使用翻译 */}
      <h1>{t.home.title}</h1>
      <p>{t.home.subtitle}</p>
      
      {/* 条件渲染基于语言 */}
      {language === 'zh' && <div>中文专属内容</div>}
      {language === 'en' && <div>English-only content</div>}
      
      {/* 按钮 */}
      <button>{t.common.save}</button>
      <button>{t.common.cancel}</button>
    </div>
  );
}
```

---

## 📊 翻译覆盖率

当前版本：

| 页面/组件 | 中文 | 英文 | 状态 |
|----------|------|------|------|
| 首页 | ✅ | ✅ | 完成 |
| 登录页 | ✅ | ✅ | 完成 |
| 注册页 | ⚠️ | ⚠️ | 待更新 |
| 仪表板 | ✅ | ✅ | 完成 |
| 个人资料 | ⚠️ | ⚠️ | 待更新 |
| 申请表单 | ⚠️ | ⚠️ | 待更新 |
| 导航栏 | ✅ | ✅ | 完成 |

> **注意**：标记为"待更新"的页面仍需要手动更新以使用翻译系统。

---

## 🔧 故障排除

### 问题1：语言切换后某些文字没变

**原因**：该文字可能还是硬编码的。

**解决**：找到对应的组件，替换为 `{t.xxx.xxx}` 格式。

### 问题2：控制台报错 "useLanguage must be used within a LanguageProvider"

**原因**：组件没有被 `LanguageProvider` 包裹。

**解决**：确保在 `_app.tsx` 中已经添加了 `<LanguageProvider>`。

### 问题3：TypeScript 报错找不到翻译

**原因**：翻译键不存在或拼写错误。

**解决**：检查 `src/config/translations.ts` 中是否定义了该键。

---

## 🎉 总结

你的学校申请助手现在支持完整的多语言功能！

### 用户体验：
- ✅ 中英文自由切换
- ✅ 自动保存语言偏好
- ✅ 实时更新无需刷新

### 开发者友好：
- ✅ 简单的 API (`useLanguage`)
- ✅ TypeScript 类型安全
- ✅ 集中管理翻译文件
- ✅ 易于扩展新语言

### 下一步：
1. 继续翻译其他页面（注册、个人资料等）
2. 根据用户反馈优化翻译
3. 考虑添加更多语言支持

---

**需要帮助？** 查看代码中的注释或询问开发团队！ 🚀

